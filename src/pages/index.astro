---
/**
 * HOMEPAGE - SEO + CRO Audit
 * 
 * Focus Keyword: "agenzia web Sassari"
 * Keyword secondarie: "siti web professionali Sassari", "SEO locale Sassari", "sviluppo siti web Sardegna"
 * 
 * MODIFICHE APPLICATE:
 * - Sottotitolo hero: aggiunta keyword "agenzia web" + localizzazione più esplicita
 * - H2 servizi: keyword "siti web professionali" aggiunta
 * - Aggiunta sezione "Per chi è questo servizio" (micro-proof)
 * - Trust badges: più specifici con focus locale
 * - CTA finale: più action-oriented
 * - Keyword integrate in modo naturale (no stuffing)
 * - Sezione blog: Ultimi articoli (8 post) aggiunta
 * 
 * ACCORCIATO:
 * - Nulla (testi già concisi)
 * 
 * POTENZIATO:
 * - Value proposition hero (più specifica)
 * - Trust signals (localizzazione + specificità)
 * - Sezione servizi (keyword naturali)
 * - Blog sections (ultimi articoli + popolari)
 */
import Layout from '@/layouts/PageLayout.astro';
import { Icon } from 'astro-icon/components';
import { findLatestPosts } from '@/utils/blog';
import { APP_BLOG } from 'astrowind:config';
import Grid from '@/components/blog/Grid.astro';
import { getBlogPermalink } from '@/utils/permalinks';

// Carica post per homepage (8 post più recenti)
const latestPosts = APP_BLOG.isEnabled ? await findLatestPosts({ count: 8 }) : [];

// DEBUG TEMPORANEO - Rimuovere dopo verifica
if (import.meta.env.DEV) {
  console.log('[DEBUG HOME] APP_BLOG.isEnabled:', APP_BLOG.isEnabled);
  console.log('[DEBUG HOME] latestPosts.length:', latestPosts.length);
  console.log('[DEBUG HOME] latestPosts:', latestPosts.map(p => ({ title: p.title, slug: p.slug })));
}

const metadata = {
  title: 'Agenzia Web Sassari | Siti Web Professionali, SEO Locale e Assistenza',
  description:
    'Agenzia web a Sassari. Sviluppiamo siti web professionali che portano clienti, ottimizziamo la tua presenza su Google Maps e offriamo supporto continuo. Risultati concreti per il tuo business.',
  canonical: '/',
  robots: { index: true, follow: true },
  openGraph: {
    url: 'https://www.lswebagency.com/',
    type: 'website',
  },
  twitter: {
    cardType: 'summary_large_image',
    handle: '@lswebagency',
    site: '@lswebagency',
  },
  ignoreTitleTemplate: true,
};

const WHATSAPP = 'https://wa.me/393403223494?text=Ciao%2C%20vorrei%20informazioni%20sui%20servizi%20LS%20Web%20Agency.';
---

<Layout metadata={metadata}>
  <!-- HERO - Variante A: Brand + Credibilità -->
  <section class="relative isolate bg-brand-surface dark:bg-slate-950 overflow-hidden">
    <!-- Glow effects -->
    <div class="absolute inset-0 -z-10 overflow-hidden pointer-events-none" aria-hidden="true">
      <div class="absolute top-1/4 left-1/4 w-96 h-96 bg-brand-purple/20 rounded-full blur-3xl"></div>
      <div class="absolute bottom-1/4 right-1/4 w-96 h-96 bg-brand-blue/20 rounded-full blur-3xl"></div>
    </div>

    <div class="mx-auto max-w-screen-xl px-6 md:px-8 py-16 lg:py-24">
      <div class="grid lg:grid-cols-2 gap-12 items-start lg:items-center">
        <!-- Testo Hero -->
        <div class="text-center lg:text-left order-1 lg:order-1">
          <!-- Micro-badge -->
          <div class="inline-flex items-center gap-2 px-4 py-1.5 mb-6 bg-white/70 dark:bg-white/10 backdrop-blur-sm rounded-full ring-1 ring-brand-ink/10 text-sm text-brand-ink dark:text-slate-300 whitespace-nowrap overflow-hidden text-ellipsis">
            <span class="w-2 h-2 rounded-full bg-brand-blue shrink-0"></span>
            <span class="sm:hidden">Siti Web + SEO Locale · Sassari → Italia</span>
            <span class="hidden sm:inline">Siti Web + SEO Locale · Operativi da Sassari, in tutta Italia</span>
          </div>

          <!-- H1 con gradiente -->
          <h1 class="text-5xl sm:text-6xl font-extrabold tracking-tight leading-[1.02] text-white drop-shadow-sm">
            <span class="block text-brand-ink dark:text-white">
              Siti Web che portano
            </span>
            <span class="block text-transparent bg-clip-text bg-gradient-to-r from-brand-purple to-brand-blue">
              clienti reali
            </span>
          </h1>

          <!-- Paragrafo descrittivo -->
          <p class="mt-6 text-lg md:text-xl text-brand-ink/80 dark:text-slate-300 leading-relaxed max-w-xl mx-auto lg:mx-0">
            Sviluppiamo <strong>siti web professionali</strong> che portano clienti, 
            ottimizziamo la tua presenza su Google Maps e offriamo supporto continuo. 
            Operativi da Sassari, lavoriamo da remoto in tutta Italia.
          </p>

          <!-- CTA -->
          <div class="mt-8 flex flex-wrap items-center gap-3">
            <!-- Primary CTA -->
            <a 
              href="/contatti" 
              class="inline-flex items-center justify-center whitespace-nowrap shrink-0 px-5 py-3 text-sm sm:px-7 sm:py-4 sm:text-base font-semibold text-white bg-brand-blue hover:opacity-95 rounded-full shadow-sm hover:shadow-md transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-brand-blue focus:ring-offset-2"
            >
              Richiedi un preventivo
              <Icon name="tabler:arrow-right" class="w-5 h-5 ml-2 shrink-0" />
            </a>
            <!-- Secondary CTA -->
            <a 
              href="/portfolio" 
              class="inline-flex items-center justify-center whitespace-nowrap shrink-0 px-5 py-3 text-sm sm:px-7 sm:py-4 sm:text-base font-semibold text-brand-ink dark:text-white bg-white dark:bg-slate-800 hover:bg-white/80 dark:hover:bg-slate-700 rounded-full ring-1 ring-brand-ink/15 dark:ring-slate-600 transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-brand-ink/20 focus:ring-offset-2"
            >
              Vedi esempi reali
            </a>
          </div>

          <!-- Proof items -->
          <ul class="mt-6 flex flex-wrap gap-x-6 gap-y-2 text-sm text-brand-ink/70 dark:text-slate-400">
            <li class="inline-flex items-center gap-2 whitespace-nowrap">
              <span class="h-2 w-2 rounded-full bg-brand-blue"></span>
              <span>SEO Locale + Maps</span>
            </li>
            <li class="inline-flex items-center gap-2 whitespace-nowrap">
              <span class="h-2 w-2 rounded-full bg-brand-blue"></span>
              <span>Performance / Core Web Vitals</span>
            </li>
            <li class="inline-flex items-center gap-2 whitespace-nowrap">
              <span class="h-2 w-2 rounded-full bg-brand-blue"></span>
              <span>Assistenza continua</span>
            </li>
          </ul>
        </div>

        <!-- Visual Card -->
        <div class="relative order-2 lg:order-2 mt-8 lg:mt-0">
          <div class="relative aspect-[16/10] rounded-3xl overflow-hidden bg-gradient-to-br from-brand-ink via-brand-purple/40 to-brand-blue/30 shadow-2xl">
            <!-- TODO: Replace with new minimal glass dashboard illustration (brand purple/blue) -->
            <!-- Current placeholder: using existing hero image -->
            <img
              src="/images/lswebagency-hero-serp-contatti.webp"
              alt="Sviluppo siti web professionali e SEO"
              width="800"
              height="600"
              loading="eager"
              decoding="async"
              fetchpriority="high"
              class="w-full h-full object-cover"
            />
            
            <!-- Overlay gradient per coerenza brand -->
            <div class="absolute inset-0 bg-gradient-to-br from-brand-ink/20 via-brand-purple/10 to-brand-blue/10 pointer-events-none"></div>
            
            <!-- Mini-card sovrapposta -->
            <div class="absolute bottom-6 left-6 bg-white/95 dark:bg-slate-800/95 backdrop-blur-sm rounded-xl px-4 py-3 shadow-lg ring-1 ring-brand-ink/10">
              <div class="flex items-center gap-2">
                <Icon name="tabler:clock" class="w-5 h-5 text-brand-blue" />
                <span class="text-sm font-semibold text-brand-ink dark:text-white">Risposta entro 24h</span>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- SERVIZI PRINCIPALI -->
  <section id="servizi" class="relative bg-slate-50 dark:bg-slate-900/50 py-16 md:py-24">
    <div class="mx-auto max-w-screen-xl px-6 md:px-8">
      <div class="text-center mb-12">
        <h2 class="text-3xl md:text-4xl lg:text-5xl font-extrabold text-slate-900 dark:text-white mb-4">
          Siti Web Professionali, SEO Locale e Assistenza
        </h2>
        <p class="text-lg md:text-xl text-slate-600 dark:text-slate-300 max-w-3xl mx-auto">
          Tre servizi completi per costruire, ottimizzare e far crescere la tua presenza online a Sassari e in Sardegna
        </p>
      </div>

      <div class="grid md:grid-cols-3 gap-8">
        <!-- Siti Web Professionali -->
        <article class="group relative bg-white dark:bg-slate-800 rounded-3xl p-8 shadow-lg hover:shadow-2xl transition-all duration-300 border border-slate-200 dark:border-slate-700 hover:-translate-y-2">
          <div class="absolute -top-4 -right-4 w-24 h-24 bg-gradient-to-br from-blue-500 to-blue-600 rounded-full opacity-10 group-hover:opacity-20 transition-opacity"></div>
          <div class="relative">
            <div class="w-16 h-16 bg-gradient-to-br from-blue-500 to-blue-600 rounded-2xl flex items-center justify-center mb-6">
              <Icon name="tabler:device-laptop" class="w-8 h-8 text-white" />
            </div>
            <h3 class="text-2xl font-bold text-slate-900 dark:text-white mb-4">
              Siti Web Professionali
            </h3>
            <p class="text-slate-600 dark:text-slate-300 mb-6 leading-relaxed">
              Sviluppiamo siti moderni e responsive, ottimizzati per SEO e performance. Design personalizzato, mobile-first e orientato alle conversioni.
            </p>
            <ul class="space-y-2 mb-6 text-sm text-slate-600 dark:text-slate-300">
              <li class="flex items-center gap-2">
                <Icon name="tabler:check" class="w-5 h-5 text-emerald-600 shrink-0" />
                <span>Design moderno e responsive</span>
              </li>
              <li class="flex items-center gap-2">
                <Icon name="tabler:check" class="w-5 h-5 text-emerald-600 shrink-0" />
                <span>Ottimizzazione SEO integrata</span>
              </li>
              <li class="flex items-center gap-2">
                <Icon name="tabler:check" class="w-5 h-5 text-emerald-600 shrink-0" />
                <span>Performance e velocità</span>
              </li>
              <li class="flex items-center gap-2">
                <Icon name="tabler:check" class="w-5 h-5 text-emerald-600 shrink-0" />
                <span>Mobile-first</span>
              </li>
            </ul>
            <a href="/servizi/siti-web" class="inline-flex items-center text-blue-600 dark:text-blue-400 font-semibold hover:underline group/link">
              Scopri di più
              <Icon name="tabler:arrow-right" class="w-4 h-4 ml-2 group-hover/link:translate-x-1 transition-transform" />
            </a>
          </div>
        </article>

        <!-- SEO Locale -->
        <article class="group relative bg-white dark:bg-slate-800 rounded-3xl p-8 shadow-lg hover:shadow-2xl transition-all duration-300 border border-slate-200 dark:border-slate-700 hover:-translate-y-2">
          <div class="absolute -top-4 -right-4 w-24 h-24 bg-gradient-to-br from-emerald-500 to-emerald-600 rounded-full opacity-10 group-hover:opacity-20 transition-opacity"></div>
          <div class="relative">
            <div class="w-16 h-16 bg-gradient-to-br from-emerald-500 to-emerald-600 rounded-2xl flex items-center justify-center mb-6">
              <Icon name="tabler:map-pin" class="w-8 h-8 text-white" />
            </div>
            <h3 class="text-2xl font-bold text-slate-900 dark:text-white mb-4">
              SEO Locale
            </h3>
            <p class="text-slate-600 dark:text-slate-300 mb-6 leading-relaxed">
              Ottimizziamo la tua presenza su Google e Google Business Profile. Appari nelle ricerche locali e aumenti la visibilità nella tua zona.
            </p>
            <ul class="space-y-2 mb-6 text-sm text-slate-600 dark:text-slate-300">
              <li class="flex items-center gap-2">
                <Icon name="tabler:check" class="w-5 h-5 text-emerald-600 shrink-0" />
                <span>Google Business Profile ottimizzato</span>
              </li>
              <li class="flex items-center gap-2">
                <Icon name="tabler:check" class="w-5 h-5 text-emerald-600 shrink-0" />
                <span>Apparizione nel Local Pack</span>
              </li>
              <li class="flex items-center gap-2">
                <Icon name="tabler:check" class="w-5 h-5 text-emerald-600 shrink-0" />
                <span>Gestione recensioni</span>
              </li>
              <li class="flex items-center gap-2">
                <Icon name="tabler:check" class="w-5 h-5 text-emerald-600 shrink-0" />
                <span>Monitoraggio e reporting</span>
              </li>
            </ul>
            <a href="/servizi/seo-locale" class="inline-flex items-center text-emerald-600 dark:text-emerald-400 font-semibold hover:underline group/link">
              Scopri di più
              <Icon name="tabler:arrow-right" class="w-4 h-4 ml-2 group-hover/link:translate-x-1 transition-transform" />
            </a>
          </div>
        </article>

        <!-- Assistenza & Manutenzione -->
        <article class="group relative bg-white dark:bg-slate-800 rounded-3xl p-8 shadow-lg hover:shadow-2xl transition-all duration-300 border border-slate-200 dark:border-slate-700 hover:-translate-y-2">
          <div class="absolute -top-4 -right-4 w-24 h-24 bg-gradient-to-br from-violet-500 to-violet-600 rounded-full opacity-10 group-hover:opacity-20 transition-opacity"></div>
          <div class="relative">
            <div class="w-16 h-16 bg-gradient-to-br from-violet-500 to-violet-600 rounded-2xl flex items-center justify-center mb-6">
              <Icon name="tabler:tools" class="w-8 h-8 text-white" />
            </div>
            <h3 class="text-2xl font-bold text-slate-900 dark:text-white mb-4">
              Assistenza & Manutenzione
            </h3>
            <p class="text-slate-600 dark:text-slate-300 mb-6 leading-relaxed">
              Supporto tecnico continuo, aggiornamenti e monitoraggio. Manteniamo il tuo sito sempre aggiornato, sicuro e performante.
            </p>
            <ul class="space-y-2 mb-6 text-sm text-slate-600 dark:text-slate-300">
              <li class="flex items-center gap-2">
                <Icon name="tabler:check" class="w-5 h-5 text-emerald-600 shrink-0" />
                <span>Supporto tecnico dedicato</span>
              </li>
              <li class="flex items-center gap-2">
                <Icon name="tabler:check" class="w-5 h-5 text-emerald-600 shrink-0" />
                <span>Aggiornamenti e backup</span>
              </li>
              <li class="flex items-center gap-2">
                <Icon name="tabler:check" class="w-5 h-5 text-emerald-600 shrink-0" />
                <span>Monitoraggio performance</span>
              </li>
              <li class="flex items-center gap-2">
                <Icon name="tabler:check" class="w-5 h-5 text-emerald-600 shrink-0" />
                <span>Interventi rapidi</span>
              </li>
            </ul>
            <a href="/servizi/assistenza-manutenzione" class="inline-flex items-center text-violet-600 dark:text-violet-400 font-semibold hover:underline group/link">
              Scopri di più
              <Icon name="tabler:arrow-right" class="w-4 h-4 ml-2 group-hover/link:translate-x-1 transition-transform" />
            </a>
          </div>
        </article>
      </div>
    </div>
  </section>

  <!-- PER CHI È -->
  <section class="container mx-auto px-6 py-12">
    <div class="max-w-4xl mx-auto">
      <div class="grid md:grid-cols-2 gap-8">
        <div class="rounded-2xl p-6 bg-emerald-50 dark:bg-emerald-950/20 ring-1 ring-emerald-200 dark:ring-emerald-900">
          <h3 class="text-xl font-bold text-emerald-900 dark:text-emerald-100 mb-3 flex items-center gap-2">
            <Icon name="tabler:check" class="w-6 h-6" />
            Per chi è questo servizio
          </h3>
          <ul class="space-y-2 text-emerald-800 dark:text-emerald-200">
            <li class="flex items-start gap-2">
              <span class="text-emerald-600 mt-1">•</span>
              <span>PMI e professionisti a Sassari e in Sardegna che vogliono più clienti</span>
            </li>
            <li class="flex items-start gap-2">
              <span class="text-emerald-600 mt-1">•</span>
              <span>Attività locali che vogliono apparire su Google Maps</span>
            </li>
            <li class="flex items-start gap-2">
              <span class="text-emerald-600 mt-1">•</span>
              <span>Chi cerca un'agenzia web con supporto continuo</span>
            </li>
          </ul>
        </div>
        <div class="rounded-2xl p-6 bg-slate-50 dark:bg-slate-900/50 ring-1 ring-slate-200 dark:ring-slate-800">
          <h3 class="text-xl font-bold text-slate-900 dark:text-white mb-3 flex items-center gap-2">
            <Icon name="tabler:info-circle" class="w-6 h-6 text-slate-600" />
            Cosa ti garantiamo
          </h3>
          <ul class="space-y-2 text-slate-700 dark:text-slate-300">
            <li class="flex items-start gap-2">
              <span class="text-slate-500 mt-1">•</span>
              <span>Consulenza gratuita prima di partire</span>
            </li>
            <li class="flex items-start gap-2">
              <span class="text-slate-500 mt-1">•</span>
              <span>Preventivo trasparente senza costi nascosti</span>
            </li>
            <li class="flex items-start gap-2">
              <span class="text-slate-500 mt-1">•</span>
              <span>Supporto continuo incluso dopo la consegna</span>
            </li>
            <li class="flex items-start gap-2">
              <span class="text-slate-500 mt-1">•</span>
              <span>Risultati misurabili con report periodici</span>
            </li>
          </ul>
        </div>
      </div>
    </div>
  </section>

  <!-- ULTIMI ARTICOLI -->
  {
    APP_BLOG.isEnabled && latestPosts.length > 0 && (
      <section class="container mx-auto px-6 py-16 md:py-24">
        <div class="max-w-7xl mx-auto">
          <div class="flex flex-col md:flex-row md:items-end md:justify-between gap-4 mb-8">
            <div>
              <h2 class="text-3xl md:text-4xl font-extrabold text-slate-900 dark:text-white mb-2">
                Ultimi articoli
              </h2>
              <p class="text-lg text-slate-600 dark:text-slate-300">
                Guide, tutorial e approfondimenti su web design, SEO e sviluppo web
              </p>
            </div>
            <a
              href={getBlogPermalink()}
              class="inline-flex items-center text-blue-600 dark:text-blue-400 font-semibold hover:underline"
            >
              Vedi tutti gli articoli
              <Icon name="tabler:arrow-right" class="w-5 h-5 ml-2" />
            </a>
          </div>
          <Grid posts={latestPosts} />
        </div>
      </section>
    )
  }

  <!-- CTA FINALE -->
  <section class="relative bg-gradient-to-br from-blue-600 via-indigo-600 to-violet-600 py-16 md:py-24">
    <div class="absolute inset-0 bg-[url('data:image/svg+xml,%3Csvg%20width%3D%2260%22%20height%3D%2260%22%20viewBox%3D%220%200%2060%2060%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%3Cg%20fill%3D%22none%22%20fill-rule%3D%22evenodd%22%3E%3Cg%20fill%3D%22%23ffffff%22%20fill-opacity%3D%220.05%22%3E%3Cpath%20d%3D%22M36%2034v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0-30V0h-2v4h-4v2h4v4h2V6h4V4h-4zM6%2034v-4H4v4H0v2h4v4h2v-4h4v-2H6zM6%204V0H4v4H0v2h4v4h2V6h4V4H6z%22%2F%3E%3C%2Fg%3E%3C%2Fg%3E%3C%2Fsvg%3E')] opacity-20"></div>
    <div class="mx-auto max-w-4xl px-6 md:px-8 text-center relative z-10">
      <h2 class="text-3xl md:text-4xl lg:text-5xl font-extrabold text-white mb-6">
        Vuoi più clienti dal web?
      </h2>
      <p class="text-lg md:text-xl text-blue-100 mb-10 max-w-2xl mx-auto">
        Prenota una consulenza gratuita. Analizziamo insieme come far crescere il tuo business online e ti proponiamo la soluzione più efficace.
      </p>
      <div class="flex flex-col sm:flex-row gap-4 justify-center">
        <a href="/contatti" class="inline-flex items-center justify-center min-h-[44px] px-6 sm:px-8 py-3 sm:py-4 text-base sm:text-lg font-semibold text-blue-600 bg-white hover:bg-blue-50 rounded-full shadow-lg hover:shadow-xl transition-all duration-200">
          <span class="whitespace-nowrap">Richiedi consulenza gratuita</span>
          <Icon name="tabler:arrow-right" class="w-5 h-5 ml-2 shrink-0" />
        </a>
        <a href={WHATSAPP} target="_blank" rel="noopener" class="inline-flex items-center justify-center min-h-[44px] px-6 sm:px-8 py-3 sm:py-4 text-base sm:text-lg font-semibold text-white bg-blue-700/50 hover:bg-blue-700 border-2 border-white/30 rounded-full transition-all duration-200">
          <Icon name="tabler:brand-whatsapp" class="w-5 h-5 mr-2 shrink-0" />
          <span class="whitespace-nowrap">Scrivici su WhatsApp</span>
        </a>
      </div>
    </div>
  </section>
</Layout>
