---
import Layout from '~/layouts/PageLayout.astro';
import HeroText from '~/components/widgets/HeroText.astro';
import Features2 from '~/components/widgets/Features2.astro';

const metadata = {
  title: 'Contatti - LS Web Agency',
  description: 'Hai bisogno di informazioni? Contattaci per una consulenza gratuita e scopri come possiamo aiutarti a realizzare il tuo progetto digitale.',
  canonical: '/contatti',
  openGraph: {
    type: 'website',
    url: 'https://lswebagency.com/contatti',
    title: 'Contatti - LS Web Agency',
    description: 'Mettiti in contatto con noi per discutere il tuo progetto e scoprire le migliori soluzioni digitali su misura.',
  },
  twitter: {
    card: 'summary_large_image',
    site: '@lswebagency',
    title: 'Contatti - LS Web Agency',
    description: 'Richiedi una consulenza gratuita e scopri le soluzioni digitali su misura per il tuo business.',
  }
};
---

<Layout metadata={metadata}>
  <script type="application/ld+json">
    {JSON.stringify({
      "@context": "https://schema.org",
      "@type": "ContactPage",
      "name": metadata.title,
      "description": metadata.description,
      "url": metadata.openGraph.url,
      "image": metadata.openGraph.images[0].url,
      "publisher": {
        "@type": "Organization",
        "name": "LS Web Agency",
        "logo": "https://lswebagency.com/images/logo.png",
        "contactPoint": {
          "@type": "ContactPoint",
          "telephone": "+39 340 3223 494",
          "contactType": "customer support",
          "email": "info@lswebagency.com",
          "areaServed": "IT",
          "availableLanguage": ["Italian", "English"]
        }
      }
    })}
  </script>

  <!-- HeroText Widget -->
  <HeroText tagline="Contatti" title="Hai bisogno di informazioni?" />

  <!-- Testo Motivazionale -->
  <section class="text-center max-w-3xl mx-auto mb-8">
    <p class="text-xl font-medium">
      Hai un progetto in mente? Siamo pronti ad ascoltarti e offrirti la soluzione su misura per te.
      <span class="text-blue-500">Contattaci oggi stesso</span> e trasforma le tue idee in realtà!
    </p>
  </section>

  <!-- Contact Form -->
  <div class="max-w-lg mx-auto bg-white dark:bg-gray-900 p-6 rounded-lg shadow-xl">
    <form 
  id="contactForm" 
  class="space-y-4" 
  action="https://formsubmit.co/info@lswebagency.com" 
  method="POST"
>
  <!-- Configurazione FormSubmit -->
  <input type="hidden" name="_next" value="https://lswebagency.com/grazie">
  <input type="hidden" name="_autoresponse" value="Grazie per averci contattato! Ti risponderemo al più presto.">
  <input type="hidden" name="_subject" value="Nuova richiesta da LS Web Agency">
  <input type="hidden" name="_captcha" value="false">

  <!-- Honeypot (anti-bot) -->
  <div style="display: none;">
    <label for="honeypot">Lascia questo campo vuoto</label>
    <input type="text" name="honeypot" id="honeypot">
  </div>

  <!-- Nome e Cognome -->
  <div>
    <label for="name" class="block text-sm font-medium text-gray-700 dark:text-gray-300">
      Nome e Cognome <span class="text-red-500">*</span>
    </label>
    <input type="text" id="name" name="user_name" placeholder="Inserisci il tuo nome" required autocomplete="name" class="input-field" />
  </div>

  <!-- Email e Numero di Telefono -->
  <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
    <div>
      <label for="email" class="block text-sm font-medium text-gray-700 dark:text-gray-300">
        Email <span class="text-red-500">*</span>
      </label>
      <input type="email" id="email" name="user_email" placeholder="esempio@email.com" required autocomplete="email" class="input-field" />
    </div>
    <div>
      <label for="phone" class="block text-sm font-medium text-gray-700 dark:text-gray-300">
        Numero di Telefono
      </label>
      <input type="tel" id="phone" name="user_phone" placeholder="+39 340 1234567" autocomplete="tel" class="input-field" />
    </div>
  </div>

  <!-- Selezione del Servizio -->
  <div>
    <label for="service" class="block text-sm font-medium text-gray-700 dark:text-gray-300">
      Seleziona il servizio di tuo interesse
    </label>
    <select id="service" name="user_service" required class="input-field">
      <option value="" disabled selected hidden>Seleziona un’opzione</option>
      <option value="siti-web">Creazione Sito Web</option>
      <option value="ecommerce">E-commerce</option>
      <option value="seo">Ottimizzazione SEO</option>
      <option value="grafica">Branding e Grafica</option>
      <option value="altro">Altro</option>
    </select>
  </div>

  <!-- Messaggio -->
  <div>
    <label for="message" class="block text-sm font-medium text-gray-700 dark:text-gray-300">
      Messaggio
    </label>
    <textarea id="message" name="user_message" rows="5" placeholder="Descrivi il tuo progetto..." required autocomplete="off" class="input-field"></textarea>
  </div>

  <!-- Checkbox Privacy -->
  <div class="flex items-start">
    <input type="checkbox" id="privacy" name="privacy" required class="checkbox" />
    <label for="privacy" class="ml-2 text-sm text-gray-600 dark:text-gray-400">
      <span class="text-red-500">*</span> Confermi di accettare la raccolta e l’elaborazione dei tuoi dati personali.
    </label>
  </div>

  <!-- Pulsante di Invio -->
  <button type="submit" class="btn-submit">Invia Richiesta</button>
</form>

<!-- Script anti-bot -->
<script>
  document.getElementById("contactForm").addEventListener("submit", function (e) {
    const honeypot = document.getElementById("honeypot").value;
    if (honeypot) {
      console.log("Spam bloccato!");
      e.preventDefault(); // Blocca l'invio se il campo è compilato
    }
  });
</script>
    

  </div>

  <!-- Features Section -->
  <Features2
    title="Siamo qui per aiutarti!"
    columns={4}
    items={[
      {
        title: 'Contatti Rapidi',
        description: `
        <div class="flex gap-4 mt-2">
          <a href="https://wa.me/393403223494" target="_blank" class="btn-whatsapp flex items-center gap-2">
            <img src="/icons/whatsapp.svg" alt="WhatsApp" class="w-6 h-6" /> WhatsApp
          </a>
          <a href="https://t.me/lswebagency" target="_blank" class="btn-telegram flex items-center gap-2">
            <img src="/icons/telegram.svg" alt="Telegram" class="w-6 h-6" /> Telegram
          </a>
        </div>
        `,
        icon: 'tabler:message',
      },
      {
        title: 'Telefono',
        description: '<a href="tel:+393403223494" class="contact-link">+39 340 3223 494</a>',
        icon: 'tabler:headset',
      },
      {
        title: 'Email',
        description: '<a href="mailto:info@lswebagency.com" class="contact-link">info@lswebagency.com</a>',
        icon: 'tabler:mail',
      },
      {
        title: 'Indirizzo',
        description: 'Via Alcide De Gasperi, 3, 07100 Sassari, Italia',
        icon: 'tabler:map-pin',
      },
    ]}
  />
</Layout>
